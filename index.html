<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>かけざん れんしゅう</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <!-- 花火（100点時）用の confetti ライブラリ -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
</head>
<body class="bg-easy">
  <div id="app">
    <!-- タイトル -->
    <h1 class="title">かけざん れんしゅう</h1>

    <!-- 難易度 + BGM -->
    <div class="top-controls">
      <div class="mode-select">
        <button class="mode-btn active" data-qcount="10">やさしい</button>
        <button class="mode-btn" data-qcount="20">ふつう</button>
        <button class="mode-btn" data-qcount="30">ちょうせん</button>
      </div>
      <button id="bgmToggle" aria-label="BGM 切り替え">🔇</button>
    </div>

    <!-- タイマー（ちょうせん用） -->
    <div id="timeDisplay" class="hidden"></div>

    <!-- 問題カード -->
    <div id="quizCard" class="card">
      <div class="status-line">
        <span id="qNo">1</span> / <span id="qTotal">10</span>
        ｜ スコア：<span id="score">0</span>
      </div>

      <div class="problem">
        <span id="left">2</span>
        <span>×</span>
        <span id="right">3</span>
        <span>=</span>
        <span id="answerBox">□</span>
      </div>

      <!-- コンボバッジ -->
      <div id="comboBadge"></div>

      <!-- 正解／不正解メッセージ -->
      <div id="fx" class="fx"></div>

      <!-- キーパッド -->
      <div class="keypad">
        <button class="key">1</button>
        <button class="key">2</button>
        <button class="key">3</button>
        <button class="key">4</button>
        <button class="key">5</button>
        <button class="key">6</button>
        <button class="key">7</button>
        <button class="key">8</button>
        <button class="key">9</button>
        <button id="keyClr" class="key">C</button>
        <button class="key">0</button>
        <button id="keyBk" class="key">←</button>
      </div>

      <!-- 送信ボタン -->
      <button id="submitBtn">こたえあわせ</button>

      <!-- 恐竜エリア -->
      <div class="dino-area skin-forest" id="dinoArea">
        <div class="dino-label">きょうりゅう</div>
        <span id="dinoEmoji">🦎</span>
        <div id="dinoName">レベル 1</div>
        <div id="dinoMsg">がんばろう！</div>
        <div class="star-bar">
          <div id="starFill"></div>
        </div>
      </div>
    </div>

    <!-- 結果カード -->
    <div id="resultCard" class="card hidden">
      <h2>けっか</h2>
      <div id="finalScore">0てん</div>
      <div id="summaryList"></div>

      <!-- 大きめの操作ボタン -->
      <div class="result-actions">
        <button id="againBtn" class="result-btn result-btn-primary">もういちど</button>
        <button id="restartBtn" class="result-btn">さいしょから</button>
      </div>
    </div>

    <!-- 九九表モーダル -->
    <div id="tableModal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <h3>かけ算九九（1〜9）</h3>
        <div id="kukuGrid"></div>
        <div style="margin-top: 10px; text-align:center;">
          <button id="closeModal">とじる</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 右下フローティング九ボタン -->
  <button id="kukuFloatingBtn" aria-label="九九の表">📘</button>

  <script src="app.js"></script>
</body>
</html>